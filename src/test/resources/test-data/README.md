# é›†æˆæµ‹è¯•æ•°æ®é›†

æœ¬ç›®å½•åŒ…å«ç”¨äºéªŒè¯æ·±åº¦ä»£ç å®¡æŸ¥åŠŸèƒ½å‡†ç¡®æ€§çš„æµ‹è¯•æ•°æ®ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶

| æ–‡ä»¶ | ä¼˜å…ˆçº§ | é—®é¢˜ç±»å‹ | é¢„æœŸé—®é¢˜æ•° | è¯´æ˜ |
|------|--------|----------|-----------|------|
| `P0_SqlInjection.java` | P0 | å®‰å…¨é—®é¢˜ | â‰¥3 | SQLæ³¨å…¥æ¼æ´ç¤ºä¾‹ |
| `P1_N1Query.java` | P1 | æ€§èƒ½é—®é¢˜ | â‰¥2 | N+1æŸ¥è¯¢é—®é¢˜ç¤ºä¾‹ |
| `P2_CodeDuplication.java` | P2 | ä»£ç è´¨é‡ | â‰¥2 | ä»£ç é‡å¤ç¤ºä¾‹ |
| `P3_NamingIssue.java` | P3 | ä»£ç è§„èŒƒ | â‰¥1 | å‘½åä¸è§„èŒƒç¤ºä¾‹ |

### é…ç½®æ–‡ä»¶

- `test-repository.json` - æµ‹è¯•ä»“åº“é…ç½®å’ŒéªŒæ”¶æ ‡å‡†
- `verify-review-accuracy.sh` - Linux/MacéªŒè¯è„šæœ¬
- `verify-review-accuracy.bat` - WindowséªŒè¯è„šæœ¬
- `README.md` - æœ¬è¯´æ˜æ–‡æ¡£

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. è¿è¡ŒéªŒè¯è„šæœ¬

**Windows:**
```bash
cd src/test/resources/test-data
verify-review-accuracy.bat
```

**Linux/Mac:**
```bash
cd src/test/resources/test-data
chmod +x verify-review-accuracy.sh
./verify-review-accuracy.sh
```

### 2. æ‰‹åŠ¨æµ‹è¯•å•ä¸ªæ–‡ä»¶

ä½¿ç”¨Claude CLIç›´æ¥å®¡æŸ¥ï¼š
```bash
claude --print "è¯·æ·±åº¦å®¡æŸ¥ä»¥ä¸‹ä»£ç ï¼Œè¯†åˆ«æ‰€æœ‰å®‰å…¨é—®é¢˜ï¼š" < P0_SqlInjection.java
```

æˆ–é€šè¿‡APIï¼š
```bash
curl -X POST http://localhost:8080/api/review/test \
  -F "file=@P0_SqlInjection.java" \
  -F "mode=deep"
```

### 3. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

æŠ¥å‘Šä¿å­˜åœ¨ `target/review-accuracy-results/` ç›®å½•ï¼š
```
accuracy-report-20251003-145230.txt
```

## ğŸ“Š éªŒæ”¶æ ‡å‡†

| ä¼˜å…ˆçº§ | æœ€ä½æ£€æµ‹ç‡ | è¯´æ˜ |
|--------|-----------|------|
| P0 (é˜»æ–­æ€§) | â‰¥90% | å¿…é¡»è¯†åˆ«å‡ºå‡ ä¹æ‰€æœ‰ä¸¥é‡å®‰å…¨é—®é¢˜ |
| P1 (ä¸¥é‡) | â‰¥85% | åº”è¯†åˆ«å¤§éƒ¨åˆ†æ€§èƒ½å’ŒåŠŸèƒ½é—®é¢˜ |
| P2 (ä¸€èˆ¬) | â‰¥75% | è¯†åˆ«ä¸»è¦çš„ä»£ç è´¨é‡é—®é¢˜ |
| P3 (å»ºè®®) | â‰¥60% | è¯†åˆ«å¸¸è§çš„è§„èŒƒé—®é¢˜ |
| **æ€»ä½“å‡†ç¡®ç‡** | **â‰¥80%** | **æ•´ä½“è¯†åˆ«å‡†ç¡®ç‡** |

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯1: å…¨ä¼˜å…ˆçº§æµ‹è¯•
æµ‹è¯•æ‰€æœ‰4ä¸ªæ–‡ä»¶ï¼ŒéªŒè¯èƒ½å¦æ­£ç¡®è¯†åˆ«P0-P3å„ç±»é—®é¢˜ã€‚

### åœºæ™¯2: å®‰å…¨ä¸“é¡¹æµ‹è¯•
ä»…æµ‹è¯• `P0_SqlInjection.java`ï¼Œä½¿ç”¨ `security` å®¡æŸ¥æ¨¡å¼ã€‚

### åœºæ™¯3: æ€§èƒ½ä¸“é¡¹æµ‹è¯•
ä»…æµ‹è¯• `P1_N1Query.java`ï¼Œä½¿ç”¨ `performance` å®¡æŸ¥æ¨¡å¼ã€‚

## ğŸ“ æµ‹è¯•ç”¨ä¾‹è¯¦ç»†è¯´æ˜

### P0_SqlInjection.java

**åŒ…å«çš„æ¼æ´ï¼š**
1. `getUserById()` - ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥åˆ°SQLï¼ˆè¡Œçº¦35ï¼‰
2. `login()` - å­—ç¬¦ä¸²æ‹¼æ¥å¯¼è‡´è®¤è¯ç»•è¿‡ï¼ˆè¡Œçº¦50ï¼‰
3. `searchUsers()` - LIKEè¯­å¥ä¸­çš„æ³¨å…¥ï¼ˆè¡Œçº¦78ï¼‰

**é¢„æœŸæ£€æµ‹ç»“æœï¼š**
- Priority: P0
- Severity: CRITICAL
- Category: å®‰å…¨é—®é¢˜
- ä¿®å¤å»ºè®®åº”åŒ…å« PreparedStatement

### P1_N1Query.java

**åŒ…å«çš„é—®é¢˜ï¼š**
1. `getUserOrdersWithItems()` - å¾ªç¯ä¸­æŸ¥è¯¢è®¢å•é¡¹ï¼ˆN+1ï¼‰
2. `getOrdersWithDetails()` - åµŒå¥—å¾ªç¯å¤šæ¬¡æŸ¥è¯¢
3. `updateOrderStatuses()` - æœªä½¿ç”¨æ‰¹é‡æ“ä½œ

**é¢„æœŸæ£€æµ‹ç»“æœï¼š**
- Priority: P1
- Severity: MAJOR
- Category: æ€§èƒ½é—®é¢˜
- ä¿®å¤å»ºè®®åº”åŒ…å« JOIN æˆ–æ‰¹é‡æ“ä½œ

### P2_CodeDuplication.java

**åŒ…å«çš„é—®é¢˜ï¼š**
1. ä¸‰å¤„ç›¸åŒçš„ `validateUser` é€»è¾‘
2. ä¸¤å¤„ç›¸åŒçš„ `calculateDiscount` é€»è¾‘
3. ä¸¤å¤„ç›¸åŒçš„ `formatDate` é€»è¾‘

**é¢„æœŸæ£€æµ‹ç»“æœï¼š**
- Priority: P2
- Severity: MAJOR
- Category: ä»£ç è´¨é‡
- ä¿®å¤å»ºè®®åº”åŒ…å«æå–å…¬å…±æ–¹æ³•

### P3_NamingIssue.java

**åŒ…å«çš„é—®é¢˜ï¼š**
1. å¤§é‡ä½¿ç”¨ç¼©å†™: `usrNm`, `pwd`, `cnt`, `amt`, `reqId`
2. å•å­—æ¯å˜é‡: `n`, `m`, `p`
3. æ–¹æ³•åä¸æ¸…æ™°: `procUsrData`, `chk`

**é¢„æœŸæ£€æµ‹ç»“æœï¼š**
- Priority: P3
- Severity: MINOR
- Category: ä»£ç è§„èŒƒ
- ä¿®å¤å»ºè®®åº”åŒ…å«ä½¿ç”¨å®Œæ•´å•è¯

## ğŸ”§ æ‰©å±•æµ‹è¯•ç”¨ä¾‹

è¦æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼š

1. åœ¨æœ¬ç›®å½•åˆ›å»ºæ–°çš„Javaæ–‡ä»¶ï¼ˆå¦‚ `P1_NewIssue.java`ï¼‰
2. åœ¨æ–‡ä»¶æ³¨é‡Šä¸­æ ‡æ³¨é¢„æœŸé—®é¢˜
3. æ›´æ–° `test-repository.json` é…ç½®
4. è¿è¡ŒéªŒè¯è„šæœ¬ç¡®è®¤è¯†åˆ«ç‡

## ğŸ“ˆ æŒç»­æ”¹è¿›

æ ¹æ®æµ‹è¯•ç»“æœä¼˜åŒ–å®¡æŸ¥Promptï¼š

1. å¦‚æœæŸç±»é—®é¢˜è¯†åˆ«ç‡ä½äºæ ‡å‡†ï¼Œåˆ†æåŸå› 
2. æ›´æ–° `review-prompts.properties` ä¸­çš„å¯¹åº”æ¨¡æ¿
3. å¢åŠ Few-shotç¤ºä¾‹
4. é‡æ–°è¿è¡ŒéªŒè¯æµ‹è¯•ç›´åˆ°è¾¾æ ‡

## ğŸ“ å‚è€ƒèµ„æ–™

- OWASP Top 10: https://owasp.org/www-project-top-ten/
- é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ
- Effective Java (Third Edition)
- Clean Code: A Handbook of Agile Software Craftsmanship
